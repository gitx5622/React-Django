{"ast":null,"code":"import _defineProperty from \"/home/gits/Desktop/React-Shopping-Cart/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/gits/Desktop/React-Shopping-Cart/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/gits/Desktop/React-Shopping-Cart/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/gits/Desktop/React-Shopping-Cart/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/gits/Desktop/React-Shopping-Cart/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/gits/Desktop/React-Shopping-Cart/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/gits/Desktop/React-Shopping-Cart/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/gits/Desktop/React-Shopping-Cart/src/components/ProductDetail.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchCart } from \"./actions/cart\";\nimport axios from \"axios\";\nimport { authAxios } from \"../utils\";\nimport { addToCartURL, productDetailURL } from \"../constants\";\nimport { Button, Icon } from \"semantic-ui-react\";\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: false,\n      error: null,\n      formVisible: false,\n      data: [],\n      formData: {}\n    };\n\n    _this.handleToggleForm = function () {\n      var formVisible = _this.state.formVisible;\n\n      _this.setState({\n        formVisible: !formVisible\n      });\n    };\n\n    _this.handleFetchItem = function () {\n      var params = _this.props.match.params;\n\n      _this.setState({\n        loading: true\n      });\n\n      axios.get(productDetailURL(params.productID)).then(function (res) {\n        _this.setState({\n          data: res.data,\n          loading: false\n        });\n      }).catch(function (err) {\n        _this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    _this.handleFormatData = function (formData) {\n      // convert {colour: 1, size: 2} to [1,2] - they're all variations\n      return Object.keys(formData).map(function (key) {\n        return formData[key];\n      });\n    };\n\n    _this.handleAddToCart = function (slug) {\n      _this.setState({\n        loading: true\n      });\n\n      var formData = _this.state.formData;\n\n      var variations = _this.handleFormatData(formData);\n\n      authAxios.post(addToCartURL, {\n        slug: slug,\n        variations: variations\n      }).then(function (res) {\n        _this.props.refreshCart();\n\n        _this.setState({\n          loading: false\n        });\n      }).catch(function (err) {\n        _this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    _this.handleChange = function (e, _ref) {\n      var name = _ref.name,\n          value = _ref.value;\n      var formData = _this.state.formData;\n\n      var updatedFormData = _objectSpread({}, formData, _defineProperty({}, name, value));\n\n      _this.setState({\n        formData: updatedFormData\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleFetchItem();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          data = _this$state.data,\n          error = _this$state.error,\n          formData = _this$state.formData,\n          formVisible = _this$state.formVisible,\n          loading = _this$state.loading;\n      var item = data;\n      return React.createElement(\"div\", {\n        className: \"card\",\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: item.image,\n        alt: item.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        to: \"/\",\n        className: \"btn-floating halfway-fab waves-effect waves-light red\",\n        onClick: function onClick() {\n          _this2.handleAddToCart(item.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"add\"))), React.createElement(\"div\", {\n        className: \"card-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, item.description), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Price: \", item.price, \"$\"))), React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Button, {\n        fluid: true,\n        color: \"yellow\",\n        floated: \"right\",\n        icon: true,\n        labelPosition: \"right\",\n        onClick: this.handleToggleForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Add to cart\", React.createElement(Icon, {\n        name: \"cart plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })))); // return(\n      //     <div className=\"container\">\n      //         <h3 className=\"center\">Our items</h3>\n      //         <div className=\"box\">\n      //             {itemList}\n      //         </div>\n      //     </div>\n      // )\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    items: state.data\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    refreshCart: function refreshCart() {\n      return dispatch(fetchCart());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/home/gits/Desktop/React-Shopping-Cart/src/components/ProductDetail.js"],"names":["React","Component","connect","fetchCart","axios","authAxios","addToCartURL","productDetailURL","Button","Icon","Home","state","loading","error","formVisible","data","formData","handleToggleForm","setState","handleFetchItem","params","props","match","get","productID","then","res","catch","err","handleFormatData","Object","keys","map","key","handleAddToCart","slug","variations","post","refreshCart","handleChange","e","name","value","updatedFormData","item","id","image","title","description","price","mapStateToProps","items","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { fetchCart } from \"./actions/cart\";\nimport axios from \"axios\";\nimport { authAxios } from \"../utils\";\n\nimport { addToCartURL, productDetailURL } from \"../constants\";\nimport {Button,Icon} from \"semantic-ui-react\";\n \nclass Home extends Component{\n    state = {\n        loading: false,\n        error: null,\n        formVisible: false,\n        data: [],\n        formData: {}\n      };\n    \n      componentDidMount() {\n        this.handleFetchItem();\n      }\n    \n      handleToggleForm = () => {\n        const { formVisible } = this.state;\n        this.setState({\n          formVisible: !formVisible\n        });\n      };\n    \n      handleFetchItem = () => {\n        const {\n          match: { params }\n        } = this.props;\n        this.setState({ loading: true });\n        axios\n          .get(productDetailURL(params.productID))\n          .then(res => {\n            this.setState({ data: res.data, loading: false });\n          })\n          .catch(err => {\n            this.setState({ error: err, loading: false });\n          });\n      };\n    \n      handleFormatData = formData => {\n        // convert {colour: 1, size: 2} to [1,2] - they're all variations\n        return Object.keys(formData).map(key => {\n          return formData[key];\n        });\n      };\n    \n      handleAddToCart = slug => {\n        this.setState({ loading: true });\n        const { formData } = this.state;\n        const variations = this.handleFormatData(formData);\n        authAxios\n          .post(addToCartURL, { slug, variations })\n          .then(res => {\n            this.props.refreshCart();\n            this.setState({ loading: false });\n          })\n          .catch(err => {\n            this.setState({ error: err, loading: false });\n          });\n      };\n    \n      handleChange = (e, { name, value }) => {\n        const { formData } = this.state;\n        const updatedFormData = {\n          ...formData,\n          [name]: value\n        };\n        this.setState({ formData: updatedFormData });\n      };\n    \n  \n    render(){\n        const { data, error, formData, formVisible, loading } = this.state;\n        const item = data;\n            return(\n                  \n                <div className=\"card\" key={item.id}>\n                        <div className=\"card-image\">\n                            <img src={item.image} alt={item.title}/>\n                           \n                            <span to=\"/\" className=\"btn-floating halfway-fab waves-effect waves-light red\" \n                            onClick={()=>{this.handleAddToCart(item.id)}}><i className=\"material-icons\">add</i></span>\n                        </div>\n\n                        <div className=\"card-content\">\n                        \n                            <p>{item.description}</p>\n                            <p><b>Price: {item.price}$</b></p>\n                        </div>\n                        <React.Fragment>\n                    <Button\n                      fluid\n                      color=\"yellow\"\n                      floated=\"right\"\n                      icon\n                      labelPosition=\"right\"\n                      onClick={this.handleToggleForm}\n                    >\n                      Add to cart\n                      <Icon name=\"cart plus\" />\n                    </Button>\n                  </React.Fragment>\n                 </div>\n\n            )\n        \n\n        // return(\n        //     <div className=\"container\">\n        //         <h3 className=\"center\">Our items</h3>\n        //         <div className=\"box\">\n        //             {itemList}\n        //         </div>\n        //     </div>\n        // )\n    }\n}\nconst mapStateToProps = (state)=>{\n    return {\n      items: state.data\n    }\n  }\n\nconst mapDispatchToProps = dispatch => {\n    return {\n      refreshCart: () => dispatch(fetchCart())\n    };\n  };\n  \nexport default connect(mapStateToProps,mapDispatchToProps)(Home)"]},"metadata":{},"sourceType":"module"}